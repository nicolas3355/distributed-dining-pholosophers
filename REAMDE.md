implementing section 4.1 of the infamous paper 

"K. Mani Chandy and Jayadev Misra. The drinking philosopher’s problem. ACM Trans. Program.
Lang. Syst., 6(4):632–646, 1984."
